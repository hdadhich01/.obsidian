/** GENERATED BY OBSIDIAN-PLUGIN-CLI, DO NOT EDIT */
var De=Object.create;var v=Object.defineProperty;var be=Object.getOwnPropertyDescriptor;var Fe=Object.getOwnPropertyNames;var Te=Object.getPrototypeOf,Pe=Object.prototype.hasOwnProperty;var V=t=>v(t,"__esModule",{value:!0});var ke=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Ae=(t,e)=>{V(t);for(var o in e)v(t,o,{get:e[o],enumerable:!0})},_e=(t,e,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of Fe(e))!Pe.call(t,n)&&n!=="default"&&v(t,n,{get:()=>e[n],enumerable:!(o=be(e,n))||o.enumerable});return t},F=t=>_e(V(v(t!=null?De(Te(t)):{},"default",t&&t.__esModule&&"default"in t?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t);var f=(t,e,o)=>new Promise((n,i)=>{var r=u=>{try{d(o.next(u))}catch(s){i(s)}},l=u=>{try{d(o.throw(u))}catch(s){i(s)}},d=u=>u.done?n(u.value):Promise.resolve(u.value).then(r,l);d((o=o.apply(t,e)).next())});var L=ke(a=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});var c=require("obsidian"),C="YYYY-MM-DD",U="gggg-[W]ww",$="YYYY-MM",j="YYYY-[Q]Q",G="YYYY";function _(t){let e=window.app.plugins.getPlugin("periodic-notes");return e&&e.settings?.[t]?.enabled}function S(){try{let{internalPlugins:t,plugins:e}=window.app;if(_("daily")){let{format:r,folder:l,template:d}=e.getPlugin("periodic-notes")?.settings?.daily||{};return{format:r||C,folder:l?.trim()||"",template:d?.trim()||""}}let{folder:o,format:n,template:i}=t.getPluginById("daily-notes")?.instance?.options||{};return{format:n||C,folder:o?.trim()||"",template:i?.trim()||""}}catch(t){console.info("No custom daily note settings found!",t)}}function M(){try{let t=window.app.plugins,e=t.getPlugin("calendar")?.options,o=t.getPlugin("periodic-notes")?.settings?.weekly;if(_("weekly"))return{format:o.format||U,folder:o.folder?.trim()||"",template:o.template?.trim()||""};let n=e||{};return{format:n.weeklyNoteFormat||U,folder:n.weeklyNoteFolder?.trim()||"",template:n.weeklyNoteTemplate?.trim()||""}}catch(t){console.info("No custom weekly note settings found!",t)}}function I(){let t=window.app.plugins;try{let e=_("monthly")&&t.getPlugin("periodic-notes")?.settings?.monthly||{};return{format:e.format||$,folder:e.folder?.trim()||"",template:e.template?.trim()||""}}catch(e){console.info("No custom monthly note settings found!",e)}}function O(){let t=window.app.plugins;try{let e=_("quarterly")&&t.getPlugin("periodic-notes")?.settings?.quarterly||{};return{format:e.format||j,folder:e.folder?.trim()||"",template:e.template?.trim()||""}}catch(e){console.info("No custom quarterly note settings found!",e)}}function E(){let t=window.app.plugins;try{let e=_("yearly")&&t.getPlugin("periodic-notes")?.settings?.yearly||{};return{format:e.format||G,folder:e.folder?.trim()||"",template:e.template?.trim()||""}}catch(e){console.info("No custom yearly note settings found!",e)}}function K(...t){let e=[];for(let n=0,i=t.length;n<i;n++)e=e.concat(t[n].split("/"));let o=[];for(let n=0,i=e.length;n<i;n++){let r=e[n];!r||r==="."||o.push(r)}return e[0]===""&&o.unshift(""),o.join("/")}function Se(t){let e=t.substring(t.lastIndexOf("/")+1);return e.lastIndexOf(".")!=-1&&(e=e.substring(0,e.lastIndexOf("."))),e}async function Me(t){let e=t.replace(/\\/g,"/").split("/");if(e.pop(),e.length){let o=K(...e);window.app.vault.getAbstractFileByPath(o)||await window.app.vault.createFolder(o)}}async function x(t,e){e.endsWith(".md")||(e+=".md");let o=c.normalizePath(K(t,e));return await Me(o),o}async function T(t){let{metadataCache:e,vault:o}=window.app,n=c.normalizePath(t);if(n==="/")return Promise.resolve(["",null]);try{let i=e.getFirstLinkpathDest(n,""),r=await o.cachedRead(i),l=window.app.foldManager.load(i);return[r,l]}catch(i){return console.error(`Failed to read the daily note template '${n}'`,i),new c.Notice("Failed to read the daily note template"),["",null]}}function y(t,e="day"){let o=t.clone().startOf(e).format();return`${e}-${o}`}function J(t){return t.replace(/\[[^\]]*\]/g,"")}function Ie(t,e){if(e==="week"){let o=J(t);return/w{1,2}/i.test(o)&&(/M{1,4}/.test(o)||/D{1,4}/.test(o))}return!1}function P(t,e){return X(t.basename,e)}function Oe(t,e){return X(Se(t),e)}function X(t,e){let n={day:S,week:M,month:I,quarter:O,year:E}[e]().format.split("/").pop(),i=window.moment(t,n,!0);if(!i.isValid())return null;if(Ie(n,e)&&e==="week"){let r=J(n);if(/w{1,2}/i.test(r))return window.moment(t,n.replace(/M{1,4}/g,"").replace(/D{1,4}/g,""),!1)}return i}var Z=class extends Error{};async function ee(t){let e=window.app,{vault:o}=e,n=window.moment,{template:i,format:r,folder:l}=S(),[d,u]=await T(i),s=t.format(r),b=await x(l,s);try{let w=await o.create(b,d.replace(/{{\s*date\s*}}/gi,s).replace(/{{\s*time\s*}}/gi,n().format("HH:mm")).replace(/{{\s*title\s*}}/gi,s).replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi,(N,h,D,p,m,g)=>{let R=n(),W=t.clone().set({hour:R.get("hour"),minute:R.get("minute"),second:R.get("second")});return D&&W.add(parseInt(p,10),m),g?W.format(g.substring(1).trim()):W.format(r)}).replace(/{{\s*yesterday\s*}}/gi,t.clone().subtract(1,"day").format(r)).replace(/{{\s*tomorrow\s*}}/gi,t.clone().add(1,"d").format(r)));return e.foldManager.save(w,u),w}catch(w){console.error(`Failed to create file: '${b}'`,w),new c.Notice("Unable to create new file.")}}function Ee(t,e){return e[y(t,"day")]??null}function xe(){let{vault:t}=window.app,{folder:e}=S(),o=t.getAbstractFileByPath(c.normalizePath(e));if(!o)throw new Z("Failed to find daily notes folder");let n={};return c.Vault.recurseChildren(o,i=>{if(i instanceof c.TFile){let r=P(i,"day");if(r){let l=y(r,"day");n[l]=i}}}),n}var te=class extends Error{};function Le(){let{moment:t}=window,e=t.localeData()._week.dow,o=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"];for(;e;)o.push(o.shift()),e--;return o}function Ye(t){return Le().indexOf(t.toLowerCase())}async function oe(t){let{vault:e}=window.app,{template:o,format:n,folder:i}=M(),[r,l]=await T(o),d=t.format(n),u=await x(i,d);try{let s=await e.create(u,r.replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi,(b,w,N,h,D,p)=>{let m=window.moment(),g=t.clone().set({hour:m.get("hour"),minute:m.get("minute"),second:m.get("second")});return N&&g.add(parseInt(h,10),D),p?g.format(p.substring(1).trim()):g.format(n)}).replace(/{{\s*title\s*}}/gi,d).replace(/{{\s*time\s*}}/gi,window.moment().format("HH:mm")).replace(/{{\s*(sunday|monday|tuesday|wednesday|thursday|friday|saturday)\s*:(.*?)}}/gi,(b,w,N)=>{let h=Ye(w);return t.weekday(h).format(N.trim())}));return window.app.foldManager.save(s,l),s}catch(s){console.error(`Failed to create file: '${u}'`,s),new c.Notice("Unable to create new file.")}}function ve(t,e){return e[y(t,"week")]??null}function He(){let t={};if(!se())return t;let{vault:e}=window.app,{folder:o}=M(),n=e.getAbstractFileByPath(c.normalizePath(o));if(!n)throw new te("Failed to find weekly notes folder");return c.Vault.recurseChildren(n,i=>{if(i instanceof c.TFile){let r=P(i,"week");if(r){let l=y(r,"week");t[l]=i}}}),t}var ne=class extends Error{};async function ie(t){let{vault:e}=window.app,{template:o,format:n,folder:i}=I(),[r,l]=await T(o),d=t.format(n),u=await x(i,d);try{let s=await e.create(u,r.replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi,(b,w,N,h,D,p)=>{let m=window.moment(),g=t.clone().set({hour:m.get("hour"),minute:m.get("minute"),second:m.get("second")});return N&&g.add(parseInt(h,10),D),p?g.format(p.substring(1).trim()):g.format(n)}).replace(/{{\s*date\s*}}/gi,d).replace(/{{\s*time\s*}}/gi,window.moment().format("HH:mm")).replace(/{{\s*title\s*}}/gi,d));return window.app.foldManager.save(s,l),s}catch(s){console.error(`Failed to create file: '${u}'`,s),new c.Notice("Unable to create new file.")}}function Re(t,e){return e[y(t,"month")]??null}function We(){let t={};if(!le())return t;let{vault:e}=window.app,{folder:o}=I(),n=e.getAbstractFileByPath(c.normalizePath(o));if(!n)throw new ne("Failed to find monthly notes folder");return c.Vault.recurseChildren(n,i=>{if(i instanceof c.TFile){let r=P(i,"month");if(r){let l=y(r,"month");t[l]=i}}}),t}var re=class extends Error{};async function Ce(t){let{vault:e}=window.app,{template:o,format:n,folder:i}=O(),[r,l]=await T(o),d=t.format(n),u=await x(i,d);try{let s=await e.create(u,r.replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi,(b,w,N,h,D,p)=>{let m=window.moment(),g=t.clone().set({hour:m.get("hour"),minute:m.get("minute"),second:m.get("second")});return N&&g.add(parseInt(h,10),D),p?g.format(p.substring(1).trim()):g.format(n)}).replace(/{{\s*date\s*}}/gi,d).replace(/{{\s*time\s*}}/gi,window.moment().format("HH:mm")).replace(/{{\s*title\s*}}/gi,d));return window.app.foldManager.save(s,l),s}catch(s){console.error(`Failed to create file: '${u}'`,s),new c.Notice("Unable to create new file.")}}function Ue(t,e){return e[y(t,"quarter")]??null}function qe(){let t={};if(!ce())return t;let{vault:e}=window.app,{folder:o}=O(),n=e.getAbstractFileByPath(c.normalizePath(o));if(!n)throw new re("Failed to find quarterly notes folder");return c.Vault.recurseChildren(n,i=>{if(i instanceof c.TFile){let r=P(i,"quarter");if(r){let l=y(r,"quarter");t[l]=i}}}),t}var ae=class extends Error{};async function Qe(t){let{vault:e}=window.app,{template:o,format:n,folder:i}=E(),[r,l]=await T(o),d=t.format(n),u=await x(i,d);try{let s=await e.create(u,r.replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi,(b,w,N,h,D,p)=>{let m=window.moment(),g=t.clone().set({hour:m.get("hour"),minute:m.get("minute"),second:m.get("second")});return N&&g.add(parseInt(h,10),D),p?g.format(p.substring(1).trim()):g.format(n)}).replace(/{{\s*date\s*}}/gi,d).replace(/{{\s*time\s*}}/gi,window.moment().format("HH:mm")).replace(/{{\s*title\s*}}/gi,d));return window.app.foldManager.save(s,l),s}catch(s){console.error(`Failed to create file: '${u}'`,s),new c.Notice("Unable to create new file.")}}function ze(t,e){return e[y(t,"year")]??null}function Be(){let t={};if(!de())return t;let{vault:e}=window.app,{folder:o}=E(),n=e.getAbstractFileByPath(c.normalizePath(o));if(!n)throw new ae("Failed to find yearly notes folder");return c.Vault.recurseChildren(n,i=>{if(i instanceof c.TFile){let r=P(i,"year");if(r){let l=y(r,"year");t[l]=i}}}),t}function Ve(){let{app:t}=window,e=t.internalPlugins.plugins["daily-notes"];if(e&&e.enabled)return!0;let o=t.plugins.getPlugin("periodic-notes");return o&&o.settings?.daily?.enabled}function se(){let{app:t}=window;if(t.plugins.getPlugin("calendar"))return!0;let e=t.plugins.getPlugin("periodic-notes");return e&&e.settings?.weekly?.enabled}function le(){let{app:t}=window,e=t.plugins.getPlugin("periodic-notes");return e&&e.settings?.monthly?.enabled}function ce(){let{app:t}=window,e=t.plugins.getPlugin("periodic-notes");return e&&e.settings?.quarterly?.enabled}function de(){let{app:t}=window,e=t.plugins.getPlugin("periodic-notes");return e&&e.settings?.yearly?.enabled}function $e(t){return{day:S,week:M,month:I,quarter:O,year:E}[t]()}function je(t,e){return{day:ee,month:ie,week:oe}[t](e)}a.DEFAULT_DAILY_NOTE_FORMAT=C;a.DEFAULT_MONTHLY_NOTE_FORMAT=$;a.DEFAULT_QUARTERLY_NOTE_FORMAT=j;a.DEFAULT_WEEKLY_NOTE_FORMAT=U;a.DEFAULT_YEARLY_NOTE_FORMAT=G;a.appHasDailyNotesPluginLoaded=Ve;a.appHasMonthlyNotesPluginLoaded=le;a.appHasQuarterlyNotesPluginLoaded=ce;a.appHasWeeklyNotesPluginLoaded=se;a.appHasYearlyNotesPluginLoaded=de;a.createDailyNote=ee;a.createMonthlyNote=ie;a.createPeriodicNote=je;a.createQuarterlyNote=Ce;a.createWeeklyNote=oe;a.createYearlyNote=Qe;a.getAllDailyNotes=xe;a.getAllMonthlyNotes=We;a.getAllQuarterlyNotes=qe;a.getAllWeeklyNotes=He;a.getAllYearlyNotes=Be;a.getDailyNote=Ee;a.getDailyNoteSettings=S;a.getDateFromFile=P;a.getDateFromPath=Oe;a.getDateUID=y;a.getMonthlyNote=Re;a.getMonthlyNoteSettings=I;a.getPeriodicNoteSettings=$e;a.getQuarterlyNote=Ue;a.getQuarterlyNoteSettings=O;a.getTemplateInfo=T;a.getWeeklyNote=ve;a.getWeeklyNoteSettings=M;a.getYearlyNote=ze;a.getYearlyNoteSettings=E});Ae(exports,{default:()=>B});var Ne=F(require("obsidian")),he=F(L());var Y=F(require("obsidian")),ue={skipWeekends:!1,enableRibbonIcon:!0},q=class extends Y.PluginSettingTab{constructor(e,o){super(e,o);this.plugin=o}display(){let{containerEl:e}=this;e.empty(),new Y.Setting(e).setName("Skip Weekends").setDesc("Skip weekends when opening tomorrow's daily note").addToggle(o=>o.setValue(this.plugin.settings.skipWeekends).onChange(n=>f(this,null,function*(){this.plugin.settings.skipWeekends=n,yield this.plugin.saveSettings()}))),new Y.Setting(e).setName("Show icon in sidebar").setDesc("Show Tomorrow's Daily Note icon in the sidebar ribbon, allowing you to open tomorrow's daily note with a single click.").addToggle(o=>o.setValue(this.plugin.settings.enableRibbonIcon).onChange(n=>f(this,null,function*(){this.plugin.settings.enableRibbonIcon=n,yield this.plugin.saveSettings(),n?this.plugin.ribbonHandler.addRibbonIcon():this.plugin.ribbonHandler.removeRibbonIcon()})))}};var ge=F(require("obsidian"));function k(){new ge.Notice("Please enable the Daily Notes plugin to use this feature.")}var fe=F(L());var A=F(L());function me(t){let e=window.moment().add(1,"day");return t&&pe(e)&&(e=Ge(e)),e}function pe(t){return t.isoWeekday()>5}function Ge(t){let e=t.add(1,"day");for(;pe(e);)e=e.add(1,"day");return e}function H(t){return f(this,null,function*(){let e=me(t),o=yield Ke(e);o&&Je(o)})}function Ke(t){return f(this,null,function*(){let e=(0,A.getDailyNote)(t,(0,A.getAllDailyNotes)());return e||(e=yield(0,A.createDailyNote)(t)),e})}function Je(t){return f(this,null,function*(){let{workspace:e}=window.app;yield e.getLeaf(!1).openFile(t,{active:!0})})}var Q=class{constructor(e){this.plugin=e}setup(){this.plugin.addCommand({id:"create-tomorrows-daily-note",name:"Open tomorrow's daily note",checkCallback:e=>{if(!e)if((0,fe.appHasDailyNotesPluginLoaded)())H(this.plugin.settings.skipWeekends);else{k();return}return!0}})}};var ye=F(L());var we="tomorrows-daily-note-ribbon-icon",z=class{constructor(e){this.plugin=e}setup(){this.plugin.settings.enableRibbonIcon&&this.addRibbonIcon()}addRibbonIcon(){this.plugin.addRibbonIcon("calendar-plus","Open tomorrow's daily note",()=>f(this,null,function*(){if((0,ye.appHasDailyNotesPluginLoaded)())yield H(this.plugin.settings.skipWeekends);else{k();return}})).setAttribute("id",we)}removeRibbonIcon(){var e;(e=document.getElementById(we))==null||e.remove()}};var B=class extends Ne.Plugin{onload(){return f(this,null,function*(){console.log("Loading plugin: Tomorrow's Daily Note"),yield this.loadSettings(),this.commandHandler=new Q(this),this.ribbonHandler=new z(this),this.triggerDependencyCheck(()=>{this.commandHandler.setup(),this.ribbonHandler.setup()})})}onunload(){console.log("Unloading plugin: Tomorrow's Daily Note")}loadSettings(){return f(this,null,function*(){this.settings=Object.assign({},ue,yield this.loadData()),this.addSettingTab(new q(this.app,this))})}saveSettings(){return f(this,null,function*(){yield this.saveData(this.settings)})}triggerDependencyCheck(e){this.app.workspace.onLayoutReady(()=>{console.log("Checking for Daily Notes plugin"),(0,he.appHasDailyNotesPluginLoaded)()||k(),e()})}};0&&(module.exports={});
